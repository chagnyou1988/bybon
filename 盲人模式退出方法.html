<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>ç›²äººæ¨¡å¼é€€å‡ºå¼•å¯¼</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f4f4f9;
            margin: 0;
        }

        .step {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 600px;
            margin: 20px;
        }

        .current-step {
            display: block;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .warning {
            color: red;
            font-weight: bold;
        }

        <style>
            /* æ–°å¢æ ·å¼ */
            .progress-bar {
                width: 100%;
                height: 10px;
                background-color: #e0e0e0;
                border-radius: 5px;
                margin: 20px 0;
                overflow: hidden;
            }

            .progress {
                height: 100%;
                background-color: #007bff;
                width: 0;
                transition: width 0.3s ease;
            }

            .step {
                /* ä¿®æ”¹åŸæœ‰æ ·å¼ */
                animation: fadeIn 0.5s ease;
            }

            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }

            .emoji {
                font-size: 2rem;
                margin: 10px 0;
            }

            .step-content {
                text-align: center;
            }
        </style>
    </style>
    <!-- å¼•å…¥ SweetAlert2 åº“ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
</head>

<body>
    <div id="step1" class="step current-step">
        <div class="step-content">
            <div class="emoji">ğŸ‘†</div>
            <h2>å°è¯•é€šè¿‡ä¾§è¾¹æŒ‰é”®é€€å‡ºç›²äººæ¨¡å¼</h2>
            <div class="progress-bar">
                <div class="progress" style="width: 25%"></div>
            </div>
            <button onclick="showConfirm(1)">æˆ‘å·²è¿ç»­ç‚¹å‡»ä¾§è¾¹æŒ‰é”®3æ¬¡</button>
            <button onclick="goBack()">è¿”å›ä¸Šä¸€çº§</button>
        </div>
    </div>

    <div id="step2" class="step">
        <div class="step-content">
            <div class="emoji">ğŸ“±</div>
            <h2>æ£€æŸ¥å±å¹•äº®å±çŠ¶æ€åŠå“åº”</h2>
            <div class="progress-bar">
                <div class="progress" style="width: 50%"></div>
            </div>
            <button onclick="checkScreenLit()">æˆ‘å·²ç‚¹å‡»å¼€æœºé”®</button>
            <button onclick="goBack()">è¿”å›ä¸Šä¸€çº§</button>
        </div>
    </div>

    <div id="step3" class="step">
        <div class="step-content">
            <div class="emoji">ğŸ‘‚</div>
            <h2>å¦‚æœå±å¹•ä¸äº®è¯·æ‰§è¡Œ</h2>
            <div class="progress-bar">
                <div class="progress" style="width: 75%"></div>
            </div>
            <div id="promptCheck">
                <p class="warning">è¯·æŒç»­ç‚¹å‡»å¼€æœºé”®ç›´åˆ°å¬åˆ°æç¤ºéŸ³ï¼ˆå¦‚æŠ¥æ—¶æˆ–é€šçŸ¥å†…å®¹ï¼‰</p>
                <button onclick="checkPromptSound()">æˆ‘å¬åˆ°æç¤ºéŸ³äº†</button>
            </div>
            <div id="unlockGuide" style="display:none;">
                <p>è¯·ç”¨ä¸‰æŒ‡è¿ç»­æ•²å‡»å±å¹•ç›´è‡³å±å¹•äº®èµ·</p>
                <button onclick="activateScreen()">å±å¹•å·²äº®èµ·</button>
            </div>
            <button onclick="goBack()">è¿”å›ä¸Šä¸€çº§</button>
        </div>
    </div>

    <div id="step4" class="step" style="display:none;">
        <div class="step-content">
            <div class="emoji">ğŸ“</div>
            <h2>å¯»æ±‚æŠ€æœ¯æ”¯æŒ</h2>
            <div class="progress-bar">
                <div class="progress" style="width: 100%"></div>
            </div>
            <p>å»ºè®®è”ç³»æŠ€æœ¯æ”¯æŒæˆ–ä¸“ä¸šäººå‘˜è·å–å¸®åŠ©ï¼Œè”ç³»æ–¹å¼ï¼š[å…·ä½“è”ç³»æ–¹å¼]</p>
            <button onclick="askRetry()">æ˜¯å¦éœ€è¦å†æ¬¡å°è¯•ä¸Šè¿°æ­¥éª¤ï¼Ÿ</button>
            <button onclick="goBack()">è¿”å›ä¸Šä¸€çº§</button>
        </div>
    </div>

    <div id="resetDiv" style="display: none;">
        <button onclick="resetProcess()">é‡æ–°å¼€å§‹</button>
    </div>

    <script>
        let currentStep = 1;

        async function showConfirm(branch) {
            const { isConfirmed } = await Swal.fire({
                title: 'æ˜¯å¦å·²é€€å‡ºç›²äººæ¨¡å¼ï¼Ÿ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'æ˜¯',
                cancelButtonText: 'å¦'
            });
            if (isConfirmed) {
                exitFlow();
            } else {
                // ä¿®å¤åˆ†æ”¯è·³è½¬é€»è¾‘
                switch(branch) {
                    case 1:
                        currentStep = 2;
                        break;
                    case 2:
                        currentStep = 3;
                        break;
                    case 3:
                        currentStep = 4;
                        break;
                    default:
                        currentStep = 1;
                }
                showStep(currentStep);
            }
        }

        async function checkScreenLit() {
            const { isConfirmed } = await Swal.fire({
                title: 'å±å¹•æ˜¯å¦äº®èµ·ï¼Ÿ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'æ˜¯',
                cancelButtonText: 'å¦'
            });
            if (isConfirmed) {
                await Swal.fire({
                    title: 'è¯·å•æŒ‡æ»‘åŠ¨è¿›å…¥è§£é”é¡µé¢ï¼Œè¾“å…¥å¯†ç æ—¶æ¯ä¸ªæ•°å­—éœ€è¦åŒå‡»',
                    icon: 'info'
                });
                const { isConfirmed: exited } = await Swal.fire({
                    title: 'æ˜¯å¦å·²é€€å‡ºç›²äººæ¨¡å¼ï¼Ÿ',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'æ˜¯',
                    cancelButtonText: 'å¦'
                });
                if (exited) {
                    exitFlow();
                } else {
                    currentStep = 1;
                    showStep(1);
                }
            } else {
                currentStep = 3;
                showStep(3);
            }
        }

        function checkPromptSound() {
            document.getElementById('promptCheck').style.display = 'none';
            document.getElementById('unlockGuide').style.display = 'block';
        }

        async function activateScreen() {
            await Swal.fire({
                title: 'å±å¹•å·²äº®èµ·ï¼Œè¯·å•æŒ‡æ»‘åŠ¨è¿›å…¥è§£é”é¡µé¢ï¼Œè¾“å…¥å¯†ç æ—¶æ¯ä¸ªæ•°å­—éœ€è¦åŒå‡»',
                icon: 'info'
            });
            const { isConfirmed: exited } = await Swal.fire({
                title: 'æ˜¯å¦å·²é€€å‡ºç›²äººæ¨¡å¼ï¼Ÿ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'æ˜¯',
                cancelButtonText: 'å¦'
            });
            if (exited) {
                exitFlow();
            } else {
                // ä¿®æ”¹ä¸ºè¿”å›åˆ†æ”¯3ï¼Œè€Œä¸æ˜¯ç›´æ¥è·³è½¬åˆ°åˆ†æ”¯4
                currentStep = 3;
                showStep(3);
                // é‡ç½®åˆ†æ”¯3çš„çŠ¶æ€
                document.getElementById('promptCheck').style.display = 'block';
                document.getElementById('unlockGuide').style.display = 'none';
            }
        }

        async function askRetry() {
            const { isConfirmed } = await Swal.fire({
                title: 'æ˜¯å¦éœ€è¦å†æ¬¡å°è¯•ä¸Šè¿°æ­¥éª¤ï¼Ÿ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'æ˜¯',
                cancelButtonText: 'å¦'
            });
            if (isConfirmed) {
                currentStep = 1;
                showStep(1);
            } else {
                exitFlow();
            }
        }

        // åœ¨showStepå‡½æ•°ä¸­æ·»åŠ è¿›åº¦æ¡æ›´æ–°
        function showStep(stepNumber) {
            document.querySelectorAll('.step').forEach(div => {
                div.classList.remove('current-step');
            });
            const step = document.getElementById(`step${stepNumber}`);
            step.classList.add('current-step');
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = step.querySelector('.progress');
            progress.style.width = `${stepNumber * 25}%`;
        }

        function exitFlow() {
            Swal.fire({
                title: 'æ“ä½œå®Œæˆï¼å¦‚é—®é¢˜ä»æœªè§£å†³ï¼Œè¯·ä¿æŒä¸æŠ€æœ¯æ”¯æŒçš„è”ç³»',
                icon: 'success'
            });
            document.querySelectorAll('.step').forEach(div => div.style.display = 'none');
            document.getElementById('resetDiv').style.display = 'block';
        }

        function goBack() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function resetProcess() {
            currentStep = 1;
            // éšè—æ‰€æœ‰æ­¥éª¤
            document.querySelectorAll('.step').forEach(div => {
                div.style.display = 'none';
                div.classList.remove('current-step');
            });
            // æ˜¾ç¤ºç¬¬ä¸€æ­¥
            const step1 = document.getElementById('step1');
            step1.style.display = 'block';
            step1.classList.add('current-step');
            // é‡ç½®åˆ†æ”¯3çš„çŠ¶æ€
            document.getElementById('promptCheck').style.display = 'block';
            document.getElementById('unlockGuide').style.display = 'none';
            // éšè—é‡ç½®æŒ‰é’®
            document.getElementById('resetDiv').style.display = 'none';
        }
    </script>
</body>

</html>